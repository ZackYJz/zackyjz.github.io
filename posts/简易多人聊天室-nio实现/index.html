<!DOCTYPE html>
<html><head>
<title>ç®€æ˜“å¤šäººèŠå¤©å®¤[2]-NIOæ¨¡å‹å®ç°</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="åˆ©ç”¨NIOåŒ…ä¸‹çš„ Buffer å’Œ Channel å®ç°ç®€å•çš„å¤šäººèŠå¤©å®¤ï¼Œå’Œ BIO å®ç°è¿›è¡Œæ¯”è¾ƒ">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">











<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  






<link rel="stylesheet" href="https://zackyjz.github.io/scss/journal.min.960a228c130d3ef3546879f9711d842ae55e73ec6664eada9e19732a5345ff00.css" integrity="sha256-lgoijBMNPvNUaHn5cR2EKuVec&#43;xmZOranhlzKlNF/wA=" media="screen">



<link rel="stylesheet" href="https://zackyjz.github.io/scss/dark-mode.min.c1df360214ba4a6540bcf9ca46d9f94dfbd42ad244d037f3b2dc9678a336cd2b.css" integrity="sha256-wd82AhS6SmVAvPnKRtn5TfvUKtJE0DfzstyWeKM2zSs=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>














</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://zackyjz.github.io/">
    
        <div class="nav-title">
            ğŸŒ ZackYJ&#39;s Blog
        </div>
        
        <div class="nav-subtitle">
            Stay hungry , Stay foolish
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                ğŸ“‘ æ–‡ç« 
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                ğŸ—„ åˆ†ç±»
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                ğŸ· æ ‡ç­¾ 
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about/aboutme">
                ğŸ‘¨â€ğŸ’» å…³äº
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Powered by <a href="https://github.com/gohugoio/hugo">hugo</a>
<br>

&copy;
	
	2021 ğŸŒ ZackYJ&#39;s Blog
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®å½• -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%80%bb%e4%bd%93%e6%b5%81%e7%a8%8b" onclick="onNavClick(`#æ€»ä½“æµç¨‹-nav`)" id="æ€»ä½“æµç¨‹-nav">
									æ€»ä½“æµç¨‹
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9c%8d%e5%8a%a1%e7%ab%af" onclick="onNavClick(`#æœåŠ¡ç«¯-nav`)" id="æœåŠ¡ç«¯-nav">
									æœåŠ¡ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c" onclick="onNavClick(`#å‡†å¤‡å·¥ä½œ-nav`)" id="å‡†å¤‡å·¥ä½œ-nav">
									å‡†å¤‡å·¥ä½œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%88%90%e5%91%98--%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95" onclick="onNavClick(`#æˆå‘˜--æ„é€ æ–¹æ³•-nav`)" id="æˆå‘˜--æ„é€ æ–¹æ³•-nav">
									æˆå‘˜ &amp; æ„é€ æ–¹æ³•
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#help-func" onclick="onNavClick(`#help-func-nav`)" id="help-func-nav">
									Help func
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%b8%bb%e6%b5%81%e7%a8%8bstart" onclick="onNavClick(`#ä¸»æµç¨‹start-nav`)" id="ä¸»æµç¨‹start-nav">
									ä¸»æµç¨‹ï¼šstart()
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86handles" onclick="onNavClick(`#äº‹ä»¶å¤„ç†handles-nav`)" id="äº‹ä»¶å¤„ç†handles-nav">
									äº‹ä»¶å¤„ç†ï¼šhandles()
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#accept-%e4%ba%8b%e4%bb%b6" onclick="onNavClick(`#accept-äº‹ä»¶-nav`)" id="accept-äº‹ä»¶-nav">
									ACCEPT äº‹ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#read-%e4%ba%8b%e4%bb%b6" onclick="onNavClick(`#read-äº‹ä»¶-nav`)" id="read-äº‹ä»¶-nav">
									READ äº‹ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b6%88%e6%81%af%e8%bd%ac%e5%8f%91" onclick="onNavClick(`#æ¶ˆæ¯è½¬å‘-nav`)" id="æ¶ˆæ¯è½¬å‘-nav">
									æ¶ˆæ¯è½¬å‘
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%ae%a2%e6%88%b7%e7%ab%af" onclick="onNavClick(`#å®¢æˆ·ç«¯-nav`)" id="å®¢æˆ·ç«¯-nav">
									å®¢æˆ·ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%b8%bb%e6%b5%81%e7%a8%8bstart-1" onclick="onNavClick(`#ä¸»æµç¨‹start-1-nav`)" id="ä¸»æµç¨‹start-1-nav">
									ä¸»æµç¨‹ï¼šstart()
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86handles-1" onclick="onNavClick(`#äº‹ä»¶å¤„ç†handles-1-nav`)" id="äº‹ä»¶å¤„ç†handles-1-nav">
									äº‹ä»¶å¤„ç†ï¼šhandles()
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%b5%8b%e8%af%95" onclick="onNavClick(`#æµ‹è¯•-nav`)" id="æµ‹è¯•-nav">
									æµ‹è¯•
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    ğŸ“‘ æ–‡ç« 
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    ğŸ—„ åˆ†ç±»
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    ğŸ· æ ‡ç­¾ 
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about/aboutme">
                    ğŸ‘¨â€ğŸ’» å…³äº
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- ç›®å½• -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%80%bb%e4%bd%93%e6%b5%81%e7%a8%8b" onclick="onNavClick(`#æ€»ä½“æµç¨‹-nav`)" id="æ€»ä½“æµç¨‹-nav">
									æ€»ä½“æµç¨‹
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9c%8d%e5%8a%a1%e7%ab%af" onclick="onNavClick(`#æœåŠ¡ç«¯-nav`)" id="æœåŠ¡ç«¯-nav">
									æœåŠ¡ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c" onclick="onNavClick(`#å‡†å¤‡å·¥ä½œ-nav`)" id="å‡†å¤‡å·¥ä½œ-nav">
									å‡†å¤‡å·¥ä½œ
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%88%90%e5%91%98--%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95" onclick="onNavClick(`#æˆå‘˜--æ„é€ æ–¹æ³•-nav`)" id="æˆå‘˜--æ„é€ æ–¹æ³•-nav">
									æˆå‘˜ &amp; æ„é€ æ–¹æ³•
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#help-func" onclick="onNavClick(`#help-func-nav`)" id="help-func-nav">
									Help func
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%b8%bb%e6%b5%81%e7%a8%8bstart" onclick="onNavClick(`#ä¸»æµç¨‹start-nav`)" id="ä¸»æµç¨‹start-nav">
									ä¸»æµç¨‹ï¼šstart()
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86handles" onclick="onNavClick(`#äº‹ä»¶å¤„ç†handles-nav`)" id="äº‹ä»¶å¤„ç†handles-nav">
									äº‹ä»¶å¤„ç†ï¼šhandles()
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#accept-%e4%ba%8b%e4%bb%b6" onclick="onNavClick(`#accept-äº‹ä»¶-nav`)" id="accept-äº‹ä»¶-nav">
									ACCEPT äº‹ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#read-%e4%ba%8b%e4%bb%b6" onclick="onNavClick(`#read-äº‹ä»¶-nav`)" id="read-äº‹ä»¶-nav">
									READ äº‹ä»¶
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b6%88%e6%81%af%e8%bd%ac%e5%8f%91" onclick="onNavClick(`#æ¶ˆæ¯è½¬å‘-nav`)" id="æ¶ˆæ¯è½¬å‘-nav">
									æ¶ˆæ¯è½¬å‘
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%ae%a2%e6%88%b7%e7%ab%af" onclick="onNavClick(`#å®¢æˆ·ç«¯-nav`)" id="å®¢æˆ·ç«¯-nav">
									å®¢æˆ·ç«¯
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%b8%bb%e6%b5%81%e7%a8%8bstart-1" onclick="onNavClick(`#ä¸»æµç¨‹start-1-nav`)" id="ä¸»æµç¨‹start-1-nav">
									ä¸»æµç¨‹ï¼šstart()
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86handles-1" onclick="onNavClick(`#äº‹ä»¶å¤„ç†handles-1-nav`)" id="äº‹ä»¶å¤„ç†handles-1-nav">
									äº‹ä»¶å¤„ç†ï¼šhandles()
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%b5%8b%e8%af%95" onclick="onNavClick(`#æµ‹è¯•-nav`)" id="æµ‹è¯•-nav">
									æµ‹è¯•
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://zackyjz.github.io/">
            ğŸŒ ZackYJ&#39;s Blog
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://zackyjz.github.io/">
        <div class="single-column-header-title">ğŸŒ ZackYJ&#39;s Blog</div>
        
        <div class="single-column-header-subtitle">Stay hungry , Stay foolish</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://logseq.oss-cn-chengdu.aliyuncs.com/noteImg/202203142007922.png')"
                    
                
            >
                <div class="post-title">
                    ç®€æ˜“å¤šäººèŠå¤©å®¤[2]-NIOæ¨¡å‹å®ç°
                    
                    <div class="post-subtitle">
                        åˆ©ç”¨NIOåŒ…ä¸‹çš„ Buffer å’Œ Channel å®ç°ç®€å•çš„å¤šäººèŠå¤©å®¤ï¼Œå’Œ BIO å®ç°è¿›è¡Œæ¯”è¾ƒ
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2020-05-02 13:31
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/java">Java</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/io">IO</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            8 min
                            
                            51 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h2 id="æ€»ä½“æµç¨‹">æ€»ä½“æµç¨‹</h2>
<hr>
<ul>
<li>
<p><code>ServerSocketChannel</code> æ³¨å†Œ ACCEPT äº‹ä»¶ç›‘å¬åˆ° Selector ä¸­ï¼Œç”¨äºç›‘å¬ accept äº‹ä»¶</p>
<ul>
<li>å½“æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å‘å‡ºè¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶äº†å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚æ—¶ï¼Œå³è§¦å‘äº† <code>ServerSocketChannel</code> çš„ accept äº‹ä»¶</li>
<li>ä¸ BIO æ¨¡å‹ä¸­ <code>ServerSocket.accept()</code> æ‰§è¡Œçš„äº‹ä»¶ç›¸åŒï¼Œå³æ¥æ”¶äº†è¯¥å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</li>
</ul>
</li>
<li>
<p><code>ServerSocketChannel</code> è§¦å‘ accept äº‹ä»¶åï¼ŒæœåŠ¡å™¨ç«¯<!-- raw HTML omitted -->å¤„ç†<!-- raw HTML omitted -->æ–°å»ºç«‹è¿æ¥çš„å®¢æˆ·ç«¯</p>
<ul>
<li>å¾—åˆ°å®¢æˆ·ç«¯å¯¹åº”çš„ SocketChannel</li>
<li>å°†æ–°è¿æ¥çš„å®¢æˆ·ç«¯çš„ SocketChannel æ³¨å†Œ READ äº‹ä»¶åœ¨ Selector ä¸­</li>
</ul>
<blockquote>
<p>å³è®© Selector ç›‘æ§å®¢æˆ·ç«¯çš„ SocketChannel æ˜¯å¦è§¦å‘ READ (å¯è¯») äº‹ä»¶</p>
</blockquote>
<blockquote>
<p>è§¦å‘æ—¶æœºï¼šå½“è¯¥å®¢æˆ·ç«¯åƒæœåŠ¡å™¨å‘é€äº†æ•°æ®ï¼Œå…¶ SocketChannel ä¸Šæœ‰äº†å¯ä¾›æœåŠ¡å™¨è¯»å–çš„æ•°æ®æ—¶ï¼Œè§¦å‘ READ äº‹ä»¶</p>
</blockquote>
<ul>
<li>
<p>å¯¹å¯è¯»äº‹ä»¶è§¦å‘åçš„å¤„ç†æ“ä½œå’Œ BIO ç±»ä¼¼ï¼šè¯»å– SocketChannel çš„æ•°æ®å¹¶è½¬å‘ç»™å½“å‰è¿æ¥åˆ°æœåŠ¡å™¨çš„å…¶ä»–å®¢æˆ·ç«¯</p>
<p>ä½†åœ¨ NIO ä¸­ï¼Œå¤„ç†å®¢æˆ·ç«¯è¿æ¥çš„æ“ä½œéƒ½æ˜¯<strong>åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¿›è¡Œ</strong></p>
</li>
</ul>
</li>
</ul>
<p><strong>æ³¨æ„</strong></p>
<ul>
<li>
<p>è™½ç„¶ NIO æ¨¡å‹ä¸­å„ä¸ªè¯»å†™æ“ä½œæ”¯æŒéé˜»å¡å¼çš„è°ƒç”¨ï¼Œä½† Selector ç›‘å¬å„ä¸ª Channel  çš„ select() æ–¹æ³•æ˜¯é˜»å¡è°ƒç”¨çš„</p>
</li>
<li>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒSelector ä¸Šç›‘å¬çš„æ‰€æœ‰ Channel éƒ½æ²¡æœ‰è§¦å‘å…¶æ³¨å†Œç›‘å¬çš„äº‹ä»¶ï¼Œæ­¤æ—¶ Selector ä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰æ‰€è¦ç›‘å¬äº‹ä»¶å‘ç”Ÿ</p>
</li>
</ul>
<h2 id="æœåŠ¡ç«¯">æœåŠ¡ç«¯</h2>
<hr>
<h3 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h3>
<h4 id="æˆå‘˜--æ„é€ æ–¹æ³•">æˆå‘˜ &amp; æ„é€ æ–¹æ³•</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String QUIT <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;bye&#34;</span><span style="color:#ff79c6">;</span>
    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> <span style="color:#8be9fd">int</span> DEFAULT_PORT <span style="color:#ff79c6">=</span> 9988<span style="color:#ff79c6">;</span>
    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> <span style="color:#8be9fd">int</span> BUFFER_SIZE <span style="color:#ff79c6">=</span> 1024<span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd;font-style:italic">private</span> ServerSocketChannel serverChannel<span style="color:#ff79c6">;</span>
    <span style="color:#8be9fd;font-style:italic">private</span> Selector selector<span style="color:#ff79c6">;</span>
    <span style="color:#6272a4">//ServerSocketChannel ä» SocketChannel ä¸­è¯»å–æ•°æ®
</span><span style="color:#6272a4"></span>    <span style="color:#8be9fd;font-style:italic">private</span> ByteBuffer readBuffer <span style="color:#ff79c6">=</span> ByteBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">allocate</span><span style="color:#ff79c6">(</span>BUFFER_SIZE<span style="color:#ff79c6">);</span>
    <span style="color:#6272a4">//ç”¨äºå‘å…¶ä»–çš„ SocketChannel ä¸­å†™æ•°æ®,è´Ÿè´£å®ç°è½¬å‘æ¶ˆæ¯æ—¶å†™å…¥å…¶ä»–å®¢æˆ·ç«¯
</span><span style="color:#6272a4"></span>    <span style="color:#8be9fd;font-style:italic">private</span> ByteBuffer writeBuffer <span style="color:#ff79c6">=</span> ByteBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">allocate</span><span style="color:#ff79c6">(</span>BUFFER_SIZE<span style="color:#ff79c6">);</span>
    <span style="color:#6272a4">//å£°æ˜æ ‡å‡†åŒ–å­—ç¬¦é›†
</span><span style="color:#6272a4"></span>    <span style="color:#8be9fd;font-style:italic">private</span> Charset charset <span style="color:#ff79c6">=</span> Charset<span style="color:#ff79c6">.</span><span style="color:#50fa7b">forName</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;UTF-8&#34;</span><span style="color:#ff79c6">);</span>
    <span style="color:#6272a4">//è‡ªå®šç›‘å¬çš„ç«¯å£
</span><span style="color:#6272a4"></span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd">int</span> port<span style="color:#ff79c6">;</span>

    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">Server</span><span style="color:#ff79c6">(){</span>
        <span style="color:#ff79c6">this</span><span style="color:#ff79c6">(</span>DEFAULT_PORT<span style="color:#ff79c6">);</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">Server</span><span style="color:#ff79c6">(</span><span style="color:#8be9fd">int</span> port<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">this</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">port</span> <span style="color:#ff79c6">=</span> port<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="help-func">Help func</h4>
<ul>
<li>
<p>ç»Ÿä¸€çš„å…³é—­æ“ä½œ</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">close</span><span style="color:#ff79c6">(</span>Closeable closeable<span style="color:#ff79c6">){</span>
    <span style="color:#ff79c6">if</span><span style="color:#ff79c6">(</span>closeable <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">null</span><span style="color:#ff79c6">){</span>
        <span style="color:#ff79c6">try</span> <span style="color:#ff79c6">{</span>
          closeable<span style="color:#ff79c6">.</span><span style="color:#50fa7b">close</span><span style="color:#ff79c6">();</span>
        <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">catch</span> <span style="color:#ff79c6">(</span>IOException e<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
          e<span style="color:#ff79c6">.</span><span style="color:#50fa7b">printStackTrace</span><span style="color:#ff79c6">();</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="ä¸»æµç¨‹start">ä¸»æµç¨‹ï¼š<code>start()</code></h3>
<hr>
<p>ç°åœ¨å¼€å§‹å®ç°æ ¸å¿ƒçš„æ–¹æ³• start</p>
<ol>
<li>
<p>è°ƒç”¨é™æ€æ–¹æ³• <code>ServerSocketChannel.open() </code>åˆ›å»ºä¸€ä¸ª ServerSocketChannel</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">serverChannel <span style="color:#ff79c6">=</span> ServerSocketChannel<span style="color:#ff79c6">.</span><span style="color:#50fa7b">open</span><span style="color:#ff79c6">()</span>
serverChannel<span style="color:#ff79c6">.</span><span style="color:#50fa7b">configureBlocking</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">false</span><span style="color:#ff79c6">);</span>
</code></pre></td></tr></table>
</div>
</div><p>é»˜è®¤æƒ…å†µä¸‹åˆ›å»ºçš„ ServerSocketChannel ä¸ºé˜»å¡å¼è°ƒç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦è®¾ç½®è°ƒç”¨æ¨¡å¼ä¸ºéé˜»å¡å¼</p>
</li>
<li>
<p>å°† ServerSocketChannel å…³è”çš„ ServerSocket ç»‘å®šåˆ°ç›‘å¬ç«¯å£</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">serverChannel<span style="color:#ff79c6">.</span><span style="color:#50fa7b">socket</span><span style="color:#ff79c6">().</span><span style="color:#50fa7b">bind</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> InetSocketAddress<span style="color:#ff79c6">(</span>port<span style="color:#ff79c6">));</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>åˆ›å»º selector å¯¹è±¡ï¼Œå¹¶å°† ServerSocketChannel çš„ ACCEPTäº‹ä»¶æ³¨å†Œåˆ° selector å¯¹è±¡ä¸­</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">selector <span style="color:#ff79c6">=</span> Selector<span style="color:#ff79c6">.</span><span style="color:#50fa7b">open</span><span style="color:#ff79c6">();</span>
serverChannel<span style="color:#ff79c6">.</span><span style="color:#50fa7b">register</span><span style="color:#ff79c6">(</span>selector<span style="color:#ff79c6">,</span>SelectionKey<span style="color:#ff79c6">.</span><span style="color:#50fa7b">OP_ACCEPT</span><span style="color:#ff79c6">);</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>å¼€å§‹ç›‘å¬è¿æ¥è¯·æ±‚</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#ff79c6">while</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">true</span><span style="color:#ff79c6">){</span>
  selector<span style="color:#ff79c6">.</span><span style="color:#50fa7b">select</span><span style="color:#ff79c6">();</span>
  Set<span style="color:#ff79c6">&lt;</span>SelectionKey<span style="color:#ff79c6">&gt;</span> keys <span style="color:#ff79c6">=</span> selector<span style="color:#ff79c6">.</span><span style="color:#50fa7b">selectedKeys</span><span style="color:#ff79c6">();</span>
<span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>å½“æ²¡æœ‰channel è§¦å‘äº‹ä»¶æ—¶ select() ä¼šé˜»å¡ï¼Œç›´åˆ°æœ‰ channel çš„äº‹ä»¶è§¦å‘ã€‚æœåŠ¡ç«¯éœ€è¦ä¸æ–­ç›‘å¬ï¼Œéœ€è¦åœ¨å¾ªç¯ä¸­è°ƒç”¨</li>
<li>selectedKeys è¿”å›æœ¬æ¬¡ç›‘å¬åˆ°çš„æ‰€æœ‰è§¦å‘äº†äº‹ä»¶çš„ channel å¯¹åº”çš„ selectedKey Set é›†åˆ</li>
</ul>
</li>
<li>
<p>å¤„ç†è§¦å‘äº‹ä»¶</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>SelectionKey key <span style="color:#ff79c6">:</span> keys<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
  handles<span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">);</span>
<span style="color:#ff79c6">}</span>
keys<span style="color:#ff79c6">.</span><span style="color:#50fa7b">clear</span><span style="color:#ff79c6">();;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>å¯¹äºé›†åˆä¸­æ¯ä¸€ä¸ªè§¦å‘äº‹ä»¶ï¼Œè°ƒç”¨ handles() è¿›è¡Œå¤„ç†ï¼Œå°†åœ¨åæ–‡å®ç°ã€‚</li>
<li>å¤„ç†å®Œåï¼Œéœ€è¦æ‰‹åŠ¨å°† selectedKeys é›†åˆæ¸…ç©ºï¼Œä¿è¯ä¸‹ä¸€è½®ä¸å¤„ç†è¿‡æœŸçš„é‡å¤äº‹ä»¶</li>
</ul>
</li>
</ol>
<h3 id="äº‹ä»¶å¤„ç†handles">äº‹ä»¶å¤„ç†ï¼š<code>handles()</code></h3>
<hr>
<h4 id="accept-äº‹ä»¶">ACCEPT äº‹ä»¶</h4>
<ul>
<li>
<p>å‘ç”Ÿåœ¨æœåŠ¡å™¨é€šé“ <code>serverSocketChannel</code> ä¸Š</p>
<ul>
<li>è§¦å‘æ—¶æœºï¼š å’Œå®¢æˆ·ç«¯å»ºç«‹äº†è¿æ¥</li>
</ul>
</li>
<li>
<p>å¤„ç†æµç¨‹ï¼š</p>
<ul>
<li>
<p>è°ƒç”¨ä¼ å…¥çš„ selectedKey çš„ <code>channel()</code> è·å¾—è§¦å‘è¿™ä¸ªäº‹ä»¶çš„ ServerSocketChannel</p>
</li>
<li>
<p>è°ƒç”¨ <code>accept()</code> æ–¹æ³•ï¼Œè¿”å›å¯¹åº”çš„å®¢æˆ·ç«¯é€šé“ SocketChannel</p>
<ul>
<li>å®¢æˆ·ç«¯çš„ channel ä¹Ÿè¦åˆ‡æ¢åˆ°éé˜»å¡è°ƒç”¨æ¨¡å¼</li>
</ul>
</li>
<li>
<p>æ¥ç€å®¢æˆ·ç«¯çš„ channel ä¹Ÿéœ€è¦æ³¨å†Œåˆ° selector ä¸Šï¼Œäº‹ä»¶ä¸º READ</p>
</li>
</ul>
</li>
</ul>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#ff79c6">if</span><span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isAcceptable</span><span style="color:#ff79c6">()){</span>
    <span style="color:#6272a4">//å¾—åˆ°è§¦å‘äº†è¿™ä¸ªäº‹ä»¶çš„é€šé“
</span><span style="color:#6272a4"></span>    ServerSocketChannel serverChannel <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>ServerSocketChannel<span style="color:#ff79c6">)</span> key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">channel</span><span style="color:#ff79c6">();</span>
    SocketChannel clientChannel <span style="color:#ff79c6">=</span> serverChannel<span style="color:#ff79c6">.</span><span style="color:#50fa7b">accept</span><span style="color:#ff79c6">();</span>
    clientChannel<span style="color:#ff79c6">.</span><span style="color:#50fa7b">configureBlocking</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">false</span><span style="color:#ff79c6">);</span>
    clientChannel<span style="color:#ff79c6">.</span><span style="color:#50fa7b">register</span><span style="color:#ff79c6">(</span>selector<span style="color:#ff79c6">,</span>SelectionKey<span style="color:#ff79c6">.</span><span style="color:#50fa7b">OP_READ</span><span style="color:#ff79c6">);</span>
    System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>getClientName<span style="color:#ff79c6">(</span>clientChannel<span style="color:#ff79c6">)+</span><span style="color:#f1fa8c">&#34;å·²è¿æ¥&#34;</span><span style="color:#ff79c6">);</span>
<span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="read-äº‹ä»¶">READ äº‹ä»¶</h4>
<ol>
<li>
<p>åˆ©ç”¨ Buffer ä»å®¢æˆ·ç«¯ channel ä¸­è¯»å‡ºå‘æ¥çš„æ¶ˆæ¯ï¼Œè¿›è¡Œæ‰“å°ç­‰å¤„ç†</p>
<blockquote>
<p>å…³äº Buffer çš„æ“ä½œåœ¨ä¹‹å‰æœ¬åœ°æ–‡ä»¶æ‹·è´çš„æ–‡ç« ä¸­æœ‰ä»‹ç»ï¼šä¼ é€é—¨</p>
</blockquote>
</li>
<li>
<p>å°†æ¶ˆæ¯è½¬å‘åˆ°å…¶ä»–å®¢æˆ·ç«¯</p>
</li>
<li>
<p>æ£€æŸ¥æ˜¯å¦é€€å‡ºç­‰ä¸šåŠ¡æ“ä½œ</p>
</li>
</ol>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#ff79c6">else</span> <span style="color:#ff79c6">if</span><span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isReadable</span><span style="color:#ff79c6">()){</span>
    SocketChannel clientChannel <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>SocketChannel<span style="color:#ff79c6">)</span> key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">channel</span><span style="color:#ff79c6">();</span>
    String fwdMsg <span style="color:#ff79c6">=</span> receive<span style="color:#ff79c6">(</span>clientChannel<span style="color:#ff79c6">);</span>
    <span style="color:#ff79c6">if</span><span style="color:#ff79c6">(</span>fwdMsg<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isEmpty</span><span style="color:#ff79c6">()){</span>
        <span style="color:#6272a4">//æ¶ˆæ¯ä¸ºç©ºï¼Œå‡ºç°å¼‚å¸¸ï¼Œä¸å†ç›‘å¬è¯¥ channel çš„äº‹ä»¶
</span><span style="color:#6272a4"></span>        key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">cancel</span><span style="color:#ff79c6">();</span>
        <span style="color:#6272a4">//æ›´æ–° selector çŠ¶æ€ï¼Œç«‹å³è¿”å› select() æ–¹æ³•ï¼ˆå¤šçº¿ç¨‹ä¸‹ï¼‰
</span><span style="color:#6272a4"></span>        selector<span style="color:#ff79c6">.</span><span style="color:#50fa7b">wakeup</span><span style="color:#ff79c6">();</span>
    <span style="color:#ff79c6">}</span><span style="color:#ff79c6">else</span><span style="color:#ff79c6">{</span>
        System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>getClientName<span style="color:#ff79c6">(</span>clientChannel<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34;:&#34;</span> <span style="color:#ff79c6">+</span> fwdMsg<span style="color:#ff79c6">);</span>
        forwardMessage<span style="color:#ff79c6">(</span>clientChannel<span style="color:#ff79c6">,</span> fwdMsg<span style="color:#ff79c6">);</span>
        <span style="color:#6272a4">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦é€€å‡º
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>checkQuit<span style="color:#ff79c6">(</span>fwdMsg<span style="color:#ff79c6">))</span> <span style="color:#ff79c6">{</span>
            key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">cancel</span><span style="color:#ff79c6">();</span>
            selector<span style="color:#ff79c6">.</span><span style="color:#50fa7b">wakeup</span><span style="color:#ff79c6">();</span>
            System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>getClientName<span style="color:#ff79c6">(</span>clientChannel<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34;å·²æ–­å¼€&#34;</span><span style="color:#ff79c6">);</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="buffer-æ¥æ”¶æ•°æ®">Buffer æ¥æ”¶æ•°æ®</h5>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#8be9fd;font-style:italic">private</span> String <span style="color:#50fa7b">receive</span><span style="color:#ff79c6">(</span>SocketChannel client<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">throws</span> IOException <span style="color:#ff79c6">{</span>
        <span style="color:#6272a4">//æ¸…ç©ºç¼“å†²åŒºé˜²æ­¢æ±¡æŸ“
</span><span style="color:#6272a4"></span>        readBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">clear</span><span style="color:#ff79c6">();</span>
        <span style="color:#6272a4">//åªè¦ channel è¿˜æœ‰å­—èŠ‚è¯»ï¼Œå°±ä¸€ç›´è¯»
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">while</span><span style="color:#ff79c6">(</span>client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">read</span><span style="color:#ff79c6">(</span>readBuffer<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">&gt;</span> 0<span style="color:#ff79c6">);</span>
        readBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">flip</span><span style="color:#ff79c6">();</span>
        <span style="color:#ff79c6">return</span> String<span style="color:#ff79c6">.</span><span style="color:#50fa7b">valueOf</span><span style="color:#ff79c6">(</span>charset<span style="color:#ff79c6">.</span><span style="color:#50fa7b">decode</span><span style="color:#ff79c6">(</span>readBuffer<span style="color:#ff79c6">));</span>
    <span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="æ¶ˆæ¯è½¬å‘">æ¶ˆæ¯è½¬å‘</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">forwardMessage</span><span style="color:#ff79c6">(</span>SocketChannel client<span style="color:#ff79c6">,</span> String fwdMsg<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">throws</span> IOException <span style="color:#ff79c6">{</span>
        <span style="color:#6272a4">//éå†æ‰€æœ‰ç›‘å¬çš„ selectionKey
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>SelectionKey key<span style="color:#ff79c6">:</span> selector<span style="color:#ff79c6">.</span><span style="color:#50fa7b">keys</span><span style="color:#ff79c6">())</span> <span style="color:#ff79c6">{</span>
            Channel connectedClient <span style="color:#ff79c6">=</span> key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">channel</span><span style="color:#ff79c6">();</span>
          	<span style="color:#6272a4">//è·³è¿‡æœåŠ¡å™¨çš„ channel
</span><span style="color:#6272a4"></span>            <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>connectedClient <span style="color:#ff79c6">instanceof</span> ServerSocketChannel<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
                <span style="color:#ff79c6">continue</span><span style="color:#ff79c6">;</span>
            <span style="color:#ff79c6">}</span>
						<span style="color:#6272a4">//è·³è¿‡å‘é€è€…å®¢æˆ·ç«¯çš„channel
</span><span style="color:#6272a4"></span>            <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isValid</span><span style="color:#ff79c6">()</span> <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#ff79c6">!</span>client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">equals</span><span style="color:#ff79c6">(</span>connectedClient<span style="color:#ff79c6">))</span> <span style="color:#ff79c6">{</span>
                writeBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">clear</span><span style="color:#ff79c6">();</span>
                writeBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span>charset<span style="color:#ff79c6">.</span><span style="color:#50fa7b">encode</span><span style="color:#ff79c6">(</span>getClientName<span style="color:#ff79c6">(</span>client<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34;:&#34;</span> <span style="color:#ff79c6">+</span> fwdMsg<span style="color:#ff79c6">));</span>
                writeBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">flip</span><span style="color:#ff79c6">();</span>
                <span style="color:#ff79c6">while</span> <span style="color:#ff79c6">(</span>writeBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">hasRemaining</span><span style="color:#ff79c6">())</span> <span style="color:#ff79c6">{</span>
                    <span style="color:#ff79c6">((</span>SocketChannel<span style="color:#ff79c6">)</span>connectedClient<span style="color:#ff79c6">).</span><span style="color:#50fa7b">write</span><span style="color:#ff79c6">(</span>writeBuffer<span style="color:#ff79c6">);</span>
                <span style="color:#ff79c6">}</span>
            <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯</h2>
<hr>
<h3 id="ä¸»æµç¨‹start-1">ä¸»æµç¨‹ï¼š<code>start()</code></h3>
<ol>
<li>è·å– SocketChannelï¼Œé…ç½®ä¸ºéé˜»å¡æ¨¡å¼</li>
<li>åˆ›å»º selectorï¼Œæ³¨å†Œ clientChannel çš„ CONNECT äº‹ä»¶</li>
<li>æ­£å¼å‘æœåŠ¡å™¨å‘é€è¿æ¥è¯·æ±‚ clientChannel</li>
<li>ä¸åœ select() ç›‘å¬è§¦å‘çš„äº‹ä»¶ï¼Œéå†è¿™äº›äº‹ä»¶è¿›è¡Œå¤„ç†</li>
</ol>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">client <span style="color:#ff79c6">=</span> SocketChannel<span style="color:#ff79c6">.</span><span style="color:#50fa7b">open</span><span style="color:#ff79c6">();</span>
client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">configureBlocking</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">false</span><span style="color:#ff79c6">);</span>

selector <span style="color:#ff79c6">=</span> Selector<span style="color:#ff79c6">.</span><span style="color:#50fa7b">open</span><span style="color:#ff79c6">();</span>
client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">register</span><span style="color:#ff79c6">(</span>selector<span style="color:#ff79c6">,</span> SelectionKey<span style="color:#ff79c6">.</span><span style="color:#50fa7b">OP_CONNECT</span><span style="color:#ff79c6">);</span>
client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">connect</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> InetSocketAddress<span style="color:#ff79c6">(</span>host<span style="color:#ff79c6">,</span> port<span style="color:#ff79c6">));</span>

<span style="color:#ff79c6">while</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">true</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
    selector<span style="color:#ff79c6">.</span><span style="color:#50fa7b">select</span><span style="color:#ff79c6">();</span>
    Set<span style="color:#ff79c6">&lt;</span>SelectionKey<span style="color:#ff79c6">&gt;</span> selectionKeys <span style="color:#ff79c6">=</span> selector<span style="color:#ff79c6">.</span><span style="color:#50fa7b">selectedKeys</span><span style="color:#ff79c6">();</span>
    <span style="color:#ff79c6">for</span> <span style="color:#ff79c6">(</span>SelectionKey key <span style="color:#ff79c6">:</span> selectionKeys<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
      	handles<span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">);</span>
    <span style="color:#ff79c6">}</span>
    selectionKeys<span style="color:#ff79c6">.</span><span style="color:#50fa7b">clear</span><span style="color:#ff79c6">();</span>
<span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="äº‹ä»¶å¤„ç†handles-1">äº‹ä»¶å¤„ç†ï¼š<code>handles()</code></h3>
<h5 id="connect">CONNECT</h5>
<p>è¿æ¥å°±ç»ªæ—¶è§¦å‘è¯¥äº‹ä»¶</p>
<ul>
<li>
<p>è·å–è§¦å‘è¯¥äº‹ä»¶çš„ clientChannel</p>
</li>
<li>
<p>éœ€è¦é¢å¤–çš„çº¿ç¨‹æ¥å¤„ç†é”®ç›˜çš„é˜»å¡è¾“å…¥</p>
</li>
<li>
<p>æ³¨å†Œè¯¥ clientChannel çš„ READ äº‹ä»¶åˆ° selector ä¸­</p>
</li>
</ul>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isConnectable</span><span style="color:#ff79c6">())</span> <span style="color:#ff79c6">{</span>
    SocketChannel client <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>SocketChannel<span style="color:#ff79c6">)</span> key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">channel</span><span style="color:#ff79c6">();</span>
    <span style="color:#6272a4">//å»ºç«‹è¿æ¥çš„è¿‡ç¨‹æ˜¯å¦å°±ç»ª
</span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isConnectionPending</span><span style="color:#ff79c6">())</span> <span style="color:#ff79c6">{</span>
        client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">finishConnect</span><span style="color:#ff79c6">();</span>
        <span style="color:#6272a4">// å¤„ç†ç”¨æˆ·çš„è¾“å…¥
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">new</span> Thread<span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> UserInputHandler<span style="color:#ff79c6">(</span><span style="color:#ff79c6">this</span><span style="color:#ff79c6">)).</span><span style="color:#50fa7b">start</span><span style="color:#ff79c6">();</span>
    <span style="color:#ff79c6">}</span>
    client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">register</span><span style="color:#ff79c6">(</span>selector<span style="color:#ff79c6">,</span> SelectionKey<span style="color:#ff79c6">.</span><span style="color:#50fa7b">OP_READ</span><span style="color:#ff79c6">);</span>
<span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>å¤„ç†é”®ç›˜è¾“å…¥çš„çº¿ç¨‹ï¼š</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">UserInputHandler</span> <span style="color:#8be9fd;font-style:italic">implements</span> Runnable<span style="color:#ff79c6">{</span>
        <span style="color:#8be9fd;font-style:italic">private</span> Client chatClient<span style="color:#ff79c6">;</span>
        <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">UserInputHandler</span><span style="color:#ff79c6">(</span>Client chatClient<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">this</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">chatClient</span> <span style="color:#ff79c6">=</span> chatClient<span style="color:#ff79c6">;</span>
        <span style="color:#ff79c6">}</span>
        @Override
        <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">run</span><span style="color:#ff79c6">()</span> <span style="color:#ff79c6">{</span>
            <span style="color:#ff79c6">try</span> <span style="color:#ff79c6">{</span>
                <span style="color:#6272a4">// ç­‰å¾…ç”¨æˆ·è¾“å…¥æ¶ˆæ¯
</span><span style="color:#6272a4"></span>                BufferedReader consoleReader <span style="color:#ff79c6">=</span>
                        <span style="color:#ff79c6">new</span> BufferedReader<span style="color:#ff79c6">(</span><span style="color:#ff79c6">new</span> InputStreamReader<span style="color:#ff79c6">(</span>System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">in</span><span style="color:#ff79c6">));</span>
                <span style="color:#ff79c6">while</span> <span style="color:#ff79c6">(</span><span style="color:#ff79c6">true</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
                    String input <span style="color:#ff79c6">=</span> consoleReader<span style="color:#ff79c6">.</span><span style="color:#50fa7b">readLine</span><span style="color:#ff79c6">();</span>
                    <span style="color:#6272a4">// å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯
</span><span style="color:#6272a4"></span>                    chatClient<span style="color:#ff79c6">.</span><span style="color:#50fa7b">send</span><span style="color:#ff79c6">(</span>input<span style="color:#ff79c6">);</span>
                    <span style="color:#6272a4">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å‡†å¤‡é€€å‡º
</span><span style="color:#6272a4"></span>                    <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>chatClient<span style="color:#ff79c6">.</span><span style="color:#50fa7b">checkQuit</span><span style="color:#ff79c6">(</span>input<span style="color:#ff79c6">))</span> <span style="color:#ff79c6">{</span>
                        <span style="color:#ff79c6">break</span><span style="color:#ff79c6">;</span>
                    <span style="color:#ff79c6">}</span>
                <span style="color:#ff79c6">}</span>
            <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">catch</span> <span style="color:#ff79c6">(</span>IOException e<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
                e<span style="color:#ff79c6">.</span><span style="color:#50fa7b">printStackTrace</span><span style="color:#ff79c6">();</span>
            <span style="color:#ff79c6">}</span>
        <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>åˆ©ç”¨ Buffer å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨ï¼š</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">send</span><span style="color:#ff79c6">(</span>String msg<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">throws</span> IOException <span style="color:#ff79c6">{</span>
    <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>msg<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isEmpty</span><span style="color:#ff79c6">())</span> <span style="color:#ff79c6">{</span>
      <span style="color:#ff79c6">return</span><span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    writeBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">clear</span><span style="color:#ff79c6">();</span>
    writeBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">put</span><span style="color:#ff79c6">(</span>charset<span style="color:#ff79c6">.</span><span style="color:#50fa7b">encode</span><span style="color:#ff79c6">(</span>msg<span style="color:#ff79c6">));</span>
    writeBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">flip</span><span style="color:#ff79c6">();</span>
    <span style="color:#ff79c6">while</span> <span style="color:#ff79c6">(</span>writeBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">hasRemaining</span><span style="color:#ff79c6">())</span> <span style="color:#ff79c6">{</span>
      client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">write</span><span style="color:#ff79c6">(</span>writeBuffer<span style="color:#ff79c6">);</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#6272a4">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å‡†å¤‡é€€å‡º
</span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>checkQuit<span style="color:#ff79c6">(</span>msg<span style="color:#ff79c6">))</span> <span style="color:#ff79c6">{</span>
      close<span style="color:#ff79c6">(</span>selector<span style="color:#ff79c6">);</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="read">READ</h5>
<p>æœåŠ¡å™¨è½¬å‘æ¶ˆæ¯æ¥æ—¶è§¦å‘è¯¥äº‹ä»¶</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isReadable</span><span style="color:#ff79c6">())</span> <span style="color:#ff79c6">{</span>
     SocketChannel client <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">(</span>SocketChannel<span style="color:#ff79c6">)</span> key<span style="color:#ff79c6">.</span><span style="color:#50fa7b">channel</span><span style="color:#ff79c6">();</span>
     String msg <span style="color:#ff79c6">=</span> receive<span style="color:#ff79c6">(</span>client<span style="color:#ff79c6">);</span>
     <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">(</span>msg<span style="color:#ff79c6">.</span><span style="color:#50fa7b">isEmpty</span><span style="color:#ff79c6">())</span> <span style="color:#ff79c6">{</span>
       <span style="color:#6272a4">// æœåŠ¡å™¨å¼‚å¸¸
</span><span style="color:#6272a4"></span>       close<span style="color:#ff79c6">(</span>selector<span style="color:#ff79c6">);</span>
     <span style="color:#ff79c6">}</span> <span style="color:#ff79c6">else</span> <span style="color:#ff79c6">{</span>
       System<span style="color:#ff79c6">.</span><span style="color:#50fa7b">out</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">println</span><span style="color:#ff79c6">(</span>msg<span style="color:#ff79c6">);</span>
     <span style="color:#ff79c6">}</span>
 <span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><p>åˆ©ç”¨ Buffer æ¥æ”¶æœåŠ¡å™¨çš„æ¶ˆæ¯ï¼š</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">private</span> String <span style="color:#50fa7b">receive</span><span style="color:#ff79c6">(</span>SocketChannel client<span style="color:#ff79c6">)</span> <span style="color:#8be9fd;font-style:italic">throws</span> IOException <span style="color:#ff79c6">{</span>
    readBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">clear</span><span style="color:#ff79c6">();</span>
    <span style="color:#ff79c6">while</span> <span style="color:#ff79c6">(</span>client<span style="color:#ff79c6">.</span><span style="color:#50fa7b">read</span><span style="color:#ff79c6">(</span>readBuffer<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">&gt;</span> 0<span style="color:#ff79c6">);</span>
    readBuffer<span style="color:#ff79c6">.</span><span style="color:#50fa7b">flip</span><span style="color:#ff79c6">();</span>
    <span style="color:#ff79c6">return</span> String<span style="color:#ff79c6">.</span><span style="color:#50fa7b">valueOf</span><span style="color:#ff79c6">(</span>charset<span style="color:#ff79c6">.</span><span style="color:#50fa7b">decode</span><span style="color:#ff79c6">(</span>readBuffer<span style="color:#ff79c6">));</span>
<span style="color:#ff79c6">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<hr>
<p>è¿è¡Œå®¢æˆ·ç«¯æ—¶éœ€è¦åœ¨è¿è¡Œé…ç½®ä¸­è¿è¡Œå¤šä¸ªå®ä¾‹è¿è¡Œï¼š</p>
<p><img src="https://logseq.oss-cn-chengdu.aliyuncs.com/noteImg/202201242042716.png" alt=""></p>
<p><img src="https://logseq.oss-cn-chengdu.aliyuncs.com/noteImg/202201242043942.png" alt=""></p>
<p><img src="https://logseq.oss-cn-chengdu.aliyuncs.com/noteImg/202201242058243.png" alt=""></p>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">æœ€åä¿®æ”¹äº 2020-05-02</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://zackyjz.github.io/posts/jdbc%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%AE%9E%E7%8E%B0/">
			ä¸Šä¸€ç¯‡<br>è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± çš„å®ç°
                </a>
                
                
                
                <a class="older-posts" href="https://zackyjz.github.io/posts/java%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E6%8B%B7%E8%B4%9D/">
			ä¸‹ä¸€ç¯‡<br>Java å››ç§æœ¬åœ°æ–‡ä»¶æ‹·è´æ–¹å¼æ¯”è¾ƒå’Œæµ‹è¯•
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                










            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Powered by <a href="https://github.com/gohugoio/hugo">hugo</a>
<br>

&copy;
	
	2021 ğŸŒ ZackYJ&#39;s Blog
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
